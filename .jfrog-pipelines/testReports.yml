resources:
  - name: testTrigger
    type: GitRepo
    configuration:
      gitProvider: vootla_git
      path: ChaitanyaVootla/jfrogMultiTest
pipelines:
  - name: test_reports
    configuration:
      environmentVariables:
        reportsCount: 1000
        readOnly:
          reportsCountTest: 1000
    steps:
      - name: test_report
        type: Bash
        configuration:
          inputResources:
            - name: testTrigger
        execution:
          onExecute:
            - pushd $res_testTrigger_resourcePath
            - npm install
            - touch .env
            - printenv
            - echo "REPORTS_COUNT=$reportsCountTest" >> .env
            - cat .env
            - cat ./reportGenerator/XMLCreater.ts
            - npm run test
            - save_tests $res_testTrigger_resourcePath/
      - name: no_test_reports
        type: Bash
        configuration:
          inputSteps:
            - name: test_report
        execution:
          onExecute:
            - echo "done"
